# Gemini Client Console

Interactive console client for Google Gemini AI API with real-time streaming support.

## Features

- ü§ñ Interactive model selection from available Gemini models
- üåä Real-time streaming responses
- ‚è±Ô∏è Response time tracking and performance metrics
- üìä Session statistics
- üìù Automatic conversation logging
- ‚öôÔ∏è Configurable via appsettings.json, user secrets, or environment variables

## Prerequisites

- .NET 10.0 SDK or later
- Google Gemini API key (get one from [Google AI Studio](https://aistudio.google.com/app/apikey))

## Quick Start

### 1. Clone the repository
```bash
git clone <your-repo-url>
cd GeminiClient
```

### 2. Set up your API key

**Option A: User Secrets (Recommended for development)**
```bash
cd GeminiClientConsole
dotnet user-secrets set "GeminiSettings:ApiKey" "YOUR_API_KEY_HERE"
```

**Option B: Environment Variable**

Windows (PowerShell):
```powershell
$env:GeminiSettings__ApiKey="YOUR_API_KEY_HERE"
```

Linux/macOS:
```bash
export GeminiSettings__ApiKey="YOUR_API_KEY_HERE"
```

**Option C: appsettings.json (Not recommended - don't commit!)**

Edit `GeminiClientConsole/appsettings.json`:
```json
{
  "GeminiSettings": {
    "ApiKey": "YOUR_API_KEY_HERE",
    "BaseUrl": "https://generativelanguage.googleapis.com/",
    "DefaultModel": "gemini-2.5-flash"
  }
}
```

### 3. Run the application
```bash
dotnet run --project GeminiClientConsole
```

## Usage

Once running, you can:

- **Enter prompts**: Type your question or prompt and press Enter
- **Change models**: Type `model` to select a different Gemini model
- **View statistics**: Type `stats` to see session statistics
- **Toggle streaming**: Type `stream` to enable/disable streaming mode
- **Open logs**: Type `log` to open the conversation log folder
- **Exit**: Type `exit` to quit

## Configuration

Configuration is loaded in this order (later overrides earlier):

1. `appsettings.json`
2. `appsettings.{Environment}.json`
3. User Secrets (Development only)
4. Environment Variables
5. Command Line Arguments

### Available Settings
```json
{
  "GeminiSettings": {
    "ApiKey": "your-api-key",
    "BaseUrl": "https://generativelanguage.googleapis.com/",
    "DefaultModel": "gemini-2.5-flash",
    "TimeoutSeconds": 30,
    "MaxRetries": 3,
    "EnableDetailedLogging": false
  }
}
```

## Conversation Logs

Conversations are automatically logged to:

- **Windows**: `%LOCALAPPDATA%\GeminiClient\logs\`
- **macOS**: `~/Library/Application Support/GeminiClient/logs/`
- **Linux**: `~/.local/share/gemini-client/logs/`

Each session creates a new log file with timestamp: `conversation_YYYY-MM-DD_HH-mm-ss.txt`

## Building for Production

### Single File Executable
```bash
# Windows
dotnet publish GeminiClientConsole/GeminiClientConsole.csproj -c Release -r win-x64 --self-contained -p:PublishSingleFile=true

# Linux
dotnet publish GeminiClientConsole/GeminiClientConsole.csproj -c Release -r linux-x64 --self-contained -p:PublishSingleFile=true

# macOS (Apple Silicon)
dotnet publish GeminiClientConsole/GeminiClientConsole.csproj -c Release -r osx-arm64 --self-contained -p:PublishSingleFile=true
```

The executable will be in `GeminiClientConsole/bin/Release/net10.0/{runtime}/publish/`

## Troubleshooting

### "API Key is not configured" error

Make sure you've set your API key using one of the methods in the Quick Start section.

### "API request failed with status 500" error

Try switching to a more stable model:
1. Type `model`
2. Select `gemini-2.5-flash` or `gemini-1.5-pro`

### Streaming not working

Some models or regions may not support streaming. Try:
1. Typing `stream` to disable streaming mode
2. Switching to a different model

## Project Structure
```
GeminiClient/
‚îú‚îÄ‚îÄ GeminiClient/              # Core library
‚îÇ   ‚îú‚îÄ‚îÄ GeminiApiClient.cs     # API client implementation
‚îÇ   ‚îú‚îÄ‚îÄ ModelService.cs        # Model management
‚îÇ   ‚îî‚îÄ‚îÄ Models/                # Request/response models
‚îú‚îÄ‚îÄ GeminiClientConsole/       # Console application
‚îÇ   ‚îú‚îÄ‚îÄ AppRunner.cs           # Main application logic
‚îÇ   ‚îú‚îÄ‚îÄ ConversationLogger.cs  # Logging functionality
‚îÇ   ‚îî‚îÄ‚îÄ ConsoleModelSelector.cs # Model selection UI
‚îî‚îÄ‚îÄ .github/workflows/         # CI/CD pipelines
```

## License

This project is licensed under the GNU Affero General Public License v3.0 or later (AGPL-3.0-or-later) - see the [LICENSE](LICENSE) file for details.

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

---

*Notice: This project contains code generated by Large Language Models such as Claude and Gemini. All code is experimental whether explicitly stated or not. The streaming implementation uses Server-Sent Events (SSE) for real-time communication with the Gemini API.*

